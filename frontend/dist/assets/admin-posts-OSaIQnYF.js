let i=1;function u(){fetch("http://localhost:3000/categories").then(e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.json()}).then(({data:e})=>{if(Array.isArray(e)){const t=e.map(o=>o.name);console.log("Category Names:",t),h(e)}else console.log("Unexpected data format:",e)}).catch(e=>{console.error("Failed to fetch Categories:",e)})}function h(e){const t=document.getElementById("tbody-admin-categories");t&&(t.innerHTML="",e.forEach(o=>{const n=document.createElement("tr"),c=document.createElement("td");c.innerHTML='<label><input type="checkbox" class="checkbox" /></label>',n.appendChild(c);const a=document.createElement("td");a.innerHTML=`
        <div class="flex items-center gap-3">
          <div>
            <div class="font-bold">
              <p>${o.name}</p>
            </div>
          </div>
        </div>
      `,n.appendChild(a);const s=document.createElement("td");s.innerHTML=`
        <div class="flex gap-4">
          <div>
            <div class="font-bold">
                <button class="delete-category-button" data-category-id="${o.id}"><i class="ri-delete-bin-6-line"></i></button>
                <button class="update-category-button" data-category-id="${o.id}"><i class="ri-edit-2-line"></i></button>

            </div>
          </div>
        `,n.appendChild(s);const d=s.querySelector(".delete-category-button");d.addEventListener("click",async()=>{const r=d.dataset.categoryId;await y(r)});const l=s.querySelector(".update-category-button");l.addEventListener("click",()=>{const r=l.dataset.categoryId;console.log("Button clicked:",r)}),t.appendChild(n)}),f(e.length))}function T(){const e=document.getElementById("addCategoriesButton"),t=document.getElementById("addCategoriesModal");e==null||e.addEventListener("click",()=>{console.log("addCategoriesButton clicked");const n=document.getElementById("addCategoriesInput").value;console.log("Request Payload:",JSON.stringify({name:n})),fetch("http://localhost:3000/categories/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n})}).then(c=>c.json()).then(c=>{c.success?(console.log("Category added successfully:",c.category),m(c.message,"success"),t.close(),location.reload()):(console.error("Failed to add category. Error:",c.error||"Unknown error"),m(c.message,"error"))}).catch(c=>{console.error(c)})})}function m(e,t){const o=document.getElementById("alert-message");o.textContent=e,o.classList.remove("success","error"),o.classList.add(t,"visible"),setTimeout(()=>{o.classList.remove("visible")},5e3)}async function y(e){if(e)try{const t=await fetch(`http://localhost:3000/categories/${e}`,{method:"DELETE"});t.ok?(console.log("Category deleted successfully"),u()):console.error("Failed to delete category:",t.statusText)}catch(t){console.error("Error deleting category:",t)}}function f(e){const t=Math.ceil(e/6),o=document.getElementById("pagination-controls-container");if(!o)return;o.innerHTML="";const n=document.createElement("div");n.classList.add("join");const c=document.createElement("button");c.classList.add("join-item","btn"),c.textContent="«",c.addEventListener("click",()=>{i>1&&(i--,u())}),n.appendChild(c);const a=document.createElement("button");a.classList.add("join-item","btn"),a.textContent=`Page ${i}`,n.appendChild(a);const s=document.createElement("button");s.classList.add("join-item","btn"),s.textContent="»",s.addEventListener("click",()=>{i<t&&(i++,u())}),n.appendChild(s),o.appendChild(n)}u();const C={selectedCategory:null,categories:[]};function E(){const e=document.getElementById("post-category-select");if(e){e.innerHTML="";const t=document.createElement("option");t.text="Select Category",t.value="",e.add(t),C.categories.forEach(o=>{const n=document.createElement("option");n.text=o,n.value=o,e.add(n)})}}E();function x(){fetch("http://localhost:3000/categories").then(e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.json()}).then(({data:e})=>{if(console.log("tot teeseres:",e),Array.isArray(e)){const t=document.getElementById("post-category-select");t.innerHTML="";const o=document.createElement("option");o.text="Select Category",o.value="",t.add(o),e.forEach(n=>{console.log("category now checking:",n);const c=document.createElement("option");c.text=n.name,c.value=n.id,t.add(c)})}else console.log("Unexpected data format:",e)}).catch(e=>{console.error("Failed to fetch Categories:",e)})}function k(){const e=document.getElementById("add-post-button");e==null||e.addEventListener("click",t=>{t.preventDefault(),console.log("addPostButton clicked");const n=document.getElementById("post-title-input").value,a=document.getElementById("post-category-select").value,d=document.getElementById("post-content-input").value;fetch("http://localhost:3000/posts/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:n,category:a,content:d})}).then(l=>l.json()).then(l=>{l.success?(console.log("Post added successfully:",l.post),location.reload()):console.error("Failed to add post. Error:",l.error||"Unknown error")})})}function b(){fetch("http://localhost:3000/posts").then(e=>e.json()).then(e=>{v(e)}).catch(e=>{console.error("Failed to fetch Posts:",e)})}function v(e){const t=document.getElementById("tbody-admin-posts");t&&(t.innerHTML="",e.forEach(o=>{const n=document.createElement("tr"),c=document.createElement("td");c.innerHTML='<label><input type="checkbox" class="checkbox" /></label>',n.appendChild(c);const a=document.createElement("td");a.innerHTML=`
             <div class="flex items-center gap-3">
                 <div>
                     <div class="font-bold">
                         <p>${o.title}</p>
                     </div>
                     <div class="text-sm opacity-50">
                     <p>${o.categories?o.categories.name:"N/A"}</p>
                     </div>
                 </div>
             </div>
         `,n.appendChild(a);const s=document.createElement("td");s.innerHTML=`<p>${o.categories?o.categories.name:"N/A"}</p>`,n.appendChild(s);const d=document.createElement("td");d.innerHTML=`<p>${o.author?o.author.name:"N/A"}</p>`,n.appendChild(d);const l=document.createElement("td");l.innerHTML=`<p class="line-clamp-2">${o.content}</p>`,n.appendChild(l);const r=document.createElement("th");r.className="flex gap-4",r.innerHTML=`
             <button class="delete-post-button" data-post-id="${o.id}"><i class="ri-delete-bin-6-line"></i></button>
             <button class="update-post-button" data-post-id="${o.id}"><i class="ri-edit-2-line"></i></button>
         `,n.appendChild(r);const p=r.querySelector(".delete-post-button");p.addEventListener("click",async()=>{const g=p.dataset.postId;console.log("Delete button clicked:",g),await L(g)}),t.appendChild(n)}))}async function L(e){if(e)try{const t=await fetch(`http://localhost:3000/posts/${e}`,{method:"DELETE"});t.ok?(console.log("Post deleted successfully"),b()):console.error("Failed to delete Post:",t.statusText)}catch(t){console.error("Error deleting Post:",t)}}export{b as a,x as b,T as c,k as d,u as f,E as p};
